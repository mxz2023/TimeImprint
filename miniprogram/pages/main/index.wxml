<!--pages/main/index.wxml-->
<view class="box" id="navbar">
  <!-- <wxs src='./index.wxs' module="utils"></wxs> -->

  <view class="nav-view" style="height: {{navBarHeight}}px;">
    <text class="nav-view-title1" style="opacity: {{opacity}};">{{title}}</text>
  </view>

  <view class="header-view">
    <text class="nav-view-title2">{{title}}</text>
  </view>

  <view class="container main">
    <!-- 日期详细信息 -->
    <view class="view-header">
      <view class="view-header-date">
        <text class="text-header-date">{{currentDay.title1}}</text>
        <!-- <text class="text-header-date-sub">{{currentDay.title4}}</text> -->
      </view>
      <view class="view-header-detail">
        <view class="view-header-detail-top">
          <text class="text-header-detail1">{{currentDay.title5}}</text>
          <text class="text-header-detail2">{{currentDay.title2}}</text>
        </view>
        <view class="view-header-detail-bottom">
          
        </view>
      </view>

      <view class="view-header-opt">
        <view class="view-header-opt-top">
          <view class="view-header-opt-item" bind:tap="onPrevMonth">
            <image class="view-header-opt-item" src="../../res/icon_left.png"></image>
          </view>
          <view class="view-today" bind:tap="onLocationToday">
            <text class="text-today">今</text>
          </view>
          <view class="view-header-opt-item" bind:tap="onNextMonth">
            <image class="view-header-opt-item" src="../../res/icon_right.png"></image>
          </view>
        </view>
        <view class="view-header-opt-bottom">
          <picker mode="date" value="{{currentMonth.resFormat}}" fields="month" start="1900-01-01" end="2100-12-31"
            data-day="{{currentDay.title1}}" bindchange="onPickerDateChange">
            <text class="text-header-opt-bottom">{{currentMonth.res}}</text>
          </picker>
        </view>
      </view>
    </view>

    <view class="line" style="margin-top: 10px"></view>

    <!-- 日、一、二、三、四、五、六 -->
    <view style="width: 100%; flex-direction: row;">
      <view class="view-week" wx:for="{{ weeks }}" wx:key="week">
        <text class="text-week" style="color: {{item.color}}">{{ item.text }}</text>
      </view>
    </view>

    <view class="line" style="margin-bottom: 10px"></view>

    <!-- 详细日历 -->
    <swiper class="swiper-view" bindchange="onChangecurrent" scroll-with-animation="{{ scrollWithAnimation }}" current="{{ currentIndex }}">
      <swiper-item class="swiper-view-item" wx:for="{{ gridListMonth }}" wx:key="row1"
        wx:for-index="idx" wx:for-item="itemDays">
        <view class="view-main">
          <view class="view-date" style="height: calc(100% / {{itemDays.length/7}}); background-color: {{item.bgColor}}" wx:for="{{ itemDays }}" wx:key="row2"
          data-item="{{item}}" data-index1="{{idx}}" data-index2="{{index}}" bind:tap="onSelectDay">
            <text class="text-date" style="color: {{item.color}}">{{ item.title1 }}</text>
            <text class="text-date-sub" style="color: {{item.color}}">{{ item.title3 }}</text>
          </view>
        </view>
      </swiper-item>
    </swiper>

    <view class="line" style="margin-top: 10px"></view>
  </view>
</view>